
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p>
        <input type="text" placeholder="请输入需要添加的选项" class="content"/>
        <button class="add">添加</button>
    </p>

    <div>
        <button class="quanxuan">全选</button>
        <button class="quanbuxuan">全不选</button>
        <button class="fanxuan">反选</button>
        <button class="shanchu">删除所选</button>
    </div>

    <p><label><input type="checkbox" class="mycheckbox"/>家里没宽带</label></p>

    <p><label><input type="checkbox" class="mycheckbox"/>网速不够快</label></p>

    <p><label><input type="checkbox" class="mycheckbox"/>手机没流量</label></p>

    <p><label><input type="checkbox" class="mycheckbox"/>学校无wifi</label></p>

    <script>
        // 添加功能
        var add = document.querySelector(".add");
        var content = document.querySelector(".content");
        add.onclick = function(){
            // 获取文本框的内容
            var contentVal = content.value;
            if( contentVal == "" ){
                alert("请输入内容以后再添加选项");
                return;
            }

            // 创建新的p标签
            var newP = document.createElement("p");
            // 设置新创建出来p标签的内容
            newP.innerHTML = '<label><input type="checkbox" class="mycheckbox"/>'+contentVal+'</label>';
            document.body.appendChild( newP );
            // 清空文本框的内容
            content.value = "";
        }

        // 全选功能
        var quanxuan = document.querySelector(".quanxuan");
        quanxuan.onclick = function(){
            // 点击一次,就重新获取所有的.mycheckbox
            var mycheckboxs = document.querySelectorAll(".mycheckbox");
            // 遍历
            for(var i = 0;  i < mycheckboxs.length; i++ ){
                mycheckboxs[i].checked = true;
            }
        }


        // 全不选功能
        var quanbuxuan = document.querySelector(".quanbuxuan");
        quanbuxuan.onclick = function(){
            // 点击一次,就重新获取所有的.mycheckbox
            var mycheckboxs = document.querySelectorAll(".mycheckbox");
            // 遍历
            for(var i = 0;  i < mycheckboxs.length; i++ ){
                mycheckboxs[i].checked = false;
            }
        }


        // 反选功能
        var fanxuan = document.querySelector(".fanxuan");
        fanxuan.onclick = function(){
            // 点击一次,就重新获取所有的.mycheckbox
            var mycheckboxs = document.querySelectorAll(".mycheckbox");
            // 遍历
            for(var i = 0;  i < mycheckboxs.length; i++ ){
                // 取反
                mycheckboxs[i].checked = !mycheckboxs[i].checked;
            }
        }


        // 删除所选功能
        var shanchu = document.querySelector(".shanchu");
        shanchu.onclick = function(){
            // 定义一个变量,保存被选中的复选框总个数
            var num = 0;

            // var flag = true;// 标记变量
            
            // 点击一次,就重新获取所有的.mycheckbox
            var mycheckboxs = document.querySelectorAll(".mycheckbox");

            // 遍历
            for(var i = 0;  i < mycheckboxs.length; i++ ){
                if( mycheckboxs[i].checked ){// 判断当前复选框是否为选中状态
                    mycheckboxs[i].parentNode.parentNode.remove();
                    num++;

                    // flag = false;
                }
            }

            // console.log( num );

            if( num == 0 ){
                alert("请选中选项以后再执行删除操作");
            }
            
            /* if( flag ){
                alert("请选中选项以后再执行删除操作");
            } */

        }
    </script>
</body>
</html>